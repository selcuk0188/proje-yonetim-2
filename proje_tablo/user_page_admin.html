<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">

    <!-- Title Page-->
    <title>Sistem Yönetici(Admin) Ekranı</title>

    <!-- Icons font CSS-->
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">
    <link rel="stylesheet" type="text/css" href="css/menu_style.css">

    <!-- Main CSS-->
    <link href="css/main-admin.css" rel="stylesheet" media="all">
    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">

    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <style type="text/css">

        .grid {
            position: relative;
            width: 100%;
            background: #fff;
            color: #666666;
            border-radius: 2px;
            margin-bottom: 25px;
            box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.1);
        }



        .grid .grid-header:after {
            clear: both;
        }

        .grid .grid-header span,
        .grid .grid-header > .fa {
            display: inline-block;
            margin: 0;
            font-weight: 300;
            font-size: 1.5em;
            float: left;
        }

        .grid .grid-header span {
            padding: 0 5px;
        }

        .grid .grid-header > .fa {
            padding: 5px 10px 0 0;
        }

        .grid .grid-header > .grid-tools {
            padding: 4px 10px;
        }

        .grid .grid-header > .grid-tools a {
            color: #999999;
            padding-left: 10px;
            cursor: pointer;
        }

        .grid .grid-header > .grid-tools a:hover {
            color: #666666;
        }

        .grid .grid-body {
            padding: 15px 20px 15px 20px;
            font-size: 0.9em;
            line-height: 1.9em;
        }

        .grid .full {
            padding: 0 !important;
        }

        .grid .transparent {
            box-shadow: none !important;
            margin: 0px !important;
            border-radius: 0px !important;
        }

        .grid.top.black > .grid-header {
            border-top-color: #000000 !important;
        }

        .grid.bottom.black > .grid-body {
            border-bottom-color: #000000 !important;
        }

        .grid.top.blue > .grid-header {
            border-top-color: #007be9 !important;
        }

        .grid.bottom.blue > .grid-body {
            border-bottom-color: #007be9 !important;
        }

        .grid.top.green > .grid-header {
            border-top-color: #00c273 !important;
        }

        .grid.bottom.green > .grid-body {
            border-bottom-color: #00c273 !important;
        }

        .grid.top.purple > .grid-header {
            border-top-color: #a700d3 !important;
        }

        .grid.bottom.purple > .grid-body {
            border-bottom-color: #a700d3 !important;
        }

        .grid.top.red > .grid-header {
            border-top-color: #dc1200 !important;
        }

        .grid.bottom.red > .grid-body {
            border-bottom-color: #dc1200 !important;
        }

        .grid.top.orange > .grid-header {
            border-top-color: #f46100 !important;
        }

        .grid.bottom.orange > .grid-body {
            border-bottom-color: #f46100 !important;
        }

        .grid.no-border > .grid-header {
            border-bottom: 0px !important;
        }

        .grid.top > .grid-header {
            border-top-width: 4px !important;
            border-top-style: solid !important;
        }

        .grid.bottom > .grid-body {
            border-bottom-width: 4px !important;
            border-bottom-style: solid !important;
        }

        .button-vue {
            background-color: #4CAF50; /* Green */
            border: none;
            color: white;
            padding: 6px 8px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 12px;
            margin: 4px 2px;
            transition-duration: 0.4s;
            cursor: pointer;
        }

        .button1vue {
            background-color: white;
            color: #47c9af;
            border: 2px solid #47c9af;
        }

        .button1vue:hover {
            background-color: #47c9af;
            color: white;
        }
    </style>
    <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
    <script src="vendor/bootstrap/js/popper.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="vendor/select2/select2.min.js"></script>
    <script src="js/main.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript"></script>


    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>


</head>
<body>
<div id='cssmenu'>
    <ul>
        <li id="n1" onclick="openPl()"><a href='#'>Kullanıcı Listesi</a></li>
        <li id="n2" onclick="openKl()"><a href='#'>Kullanıcı Ekleme</a></li>
        <li id="n3" onclick="openMl()"><a href='#'>Ders Atama</a></li>
        <li id="n4" onclick="openSl()"><a href='#'>Ders Kullanıcı Listesi</a></li>
    </ul>
</div>
<div id="pl" class="page-wrapper p-t-130 p-b-100 font-poppins" style="background-color: #808B96;">
    <div class="container">
    <div id="kullaniciListele">
        <table>
            <thead class="thead-dark">
            <tr>
                <th>Kullanıcı ID</th>
                <th>TCKN</th>
                <th>Rol</th>
                <th>Adı Soyadı</th>
                <th>Kullanıcı Adı</th>
                <th>Şifre</th>
                <th>İşlem</th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="kullanici in kullaniciList" :key="kullanici.id">
                <td>{{kullanici.id}}</td>
                <td>{{kullanici.tcNo}}</td>
                <td>{{getRolName(kullanici.rolId)}}</td>
                <td>{{kullanici.adSoyad}}</td>
                <td>{{kullanici.kullaniciAdi}}</td>
                <td>{{kullanici.sifre}}<i class="fa fa-eye" aria-hidden="true" onclick="showPass()"></i></td>
                <td>
                    <button class="button-vue button1vue" v-on:click="kullaniciSil(kullanici.id)">Sil</button>
                </td>

            </tr>
            </tbody>
        </table>
    </div>
        </div>
</div>
    <div id="kl" class="page-wrapper p-t-130 p-b-100 font-poppins" style="background-color: #808B96;">
        <div class="wrapper wrapper--w680">
            <div class="card card-4">
                <div class="card-body">
                    <h2 class="title">Kullanıcı Kayıt Formu</h2>
                    <form method="POST">
                        <div class="row row-space">
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Ad</label>
                                    <input class="input--style-4" type="text" name="first_name" id="first_name">
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Soyad</label>
                                    <input class="input--style-4" type="text" name="last_name"  id="last_name">
                                </div>
                            </div>
                        </div>
                        <div class="row row-space">
                           <div class="col-2">
                                <div class="input-group">
                                    <label class="label">TCKN</label>
                                    <input class="input--style-4" type="text" name="tckn" id="tckn">
                                </div>
                            </div>
                        </div>
                        <div class="row row-space">
                           <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Kullanıcı Adı</label>
                                    <input class="input--style-4" type="text" name="kullanici_adi" id="kullanici_adi">
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Şifre <i class="fa fa-eye" aria-hidden="true" onclick="showPass()"></i></label>
                                    <input id="passId" class="input--style-4" type="password" name="pass">
                                </div>
                        </div>
                        </div>
                        <div class="input-group">
                            <label class="label">Rol</label>
                            <div class="rs-select2 js-select-simple select--no-search">
                                <select name="subject" id="rol">
                                    <option disabled="disabled" selected="selected">Seçiniz</option>
                                    <option value="1">Öğrenci</option>
                                    <option value="2">Öğretmen</option>
                                    <option value="3">Admin</option>
                                </select>
                                <div class="select-dropdown"></div>
                            </div>
                        </div>
                        <div class="p-t-15" id="ogrenciKayitForm">
                            <button class="btn btn--radius-2 btn--blue" v-on:click="save()">Kaydet</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


<div id="ml" class="page-wrapper p-t-130 p-b-100 font-poppins" style="background-color: #808B96;">
    <div class="wrapper wrapper--w680">
        <div class="card card-4">
            <div class="card-body">
                <h2 class="title">Ders Kullanıcı Kayıt</h2>
                <form method="POST">
                    <div class="row row-space" id="ogretmenKayitPanel" >
                        <div class="col-2">
                            <div class="input-group">
                                <label class="label">Ders</label>
                                <input id="dersListId2" type="text" v-model="derslist2" list="dersList2"  @change="getKullaniciList()" placeholder="Seçiniz">
                                <datalist id="dersList2">
                                    <option v-for="derslist2 in dersList2">{{derslist2.id}}-{{derslist2.dersadi}}</option>
                                </datalist>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="input-group">
                                <label class="label">Öğretmen</label>
                                <input id="ogretmenId" type="text" v-model="user2" list="userList2"  @change="getKullaniciList()" placeholder="Seçiniz">
                                <datalist id="userList2">
                                    <option v-for="user2 in userList2">{{user2.id}}-{{user2.adSoyad}}</option>
                                </datalist>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="input-group">
                            <div class="p-t-15" id="dersOgretmenKayit">
                                <button class="btn btn--radius-2 btn--blue" v-on:click="saveOgretmen()">Kaydet</button>
                            </div>
                            </div>
                        </div>
                    </div>
                    <div class="row row-space" id="ogrenciKayitPanel">
                        <div class="col-2">
                            <div class="input-group">
                                <label class="label">Ders</label>
                                <input id="dersListId1" type="text" v-model="derslist1" list="dersList1"  @change="getKullaniciList()" placeholder="Seçiniz">
                                <datalist id="dersList1">
                                    <option v-for="derslist1 in dersList1">{{derslist1.id}}-{{derslist1.dersadi}}</option>
                                </datalist>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="input-group">
                                <label class="label">Öğrenci</label>
                                <input id="ogrenciId" type="text" v-model="user1" list="userList1"  @change="getKullaniciList()" placeholder="Seçiniz">
                                <datalist id="userList1">
                                    <option v-for="user1 in userList1">{{user1.id}}-{{user1.adSoyad}}</option>
                                </datalist>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="input-group">
                                <div class="p-t-15" id="dersOgrenciKayit">
                                    <button class="btn btn--radius-2 btn--blue" v-on:click="saveOgrenci()">Kaydet</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="sl" class="page-wrapper p-t-130 p-b-100 font-poppins" style="background-color: #808B96;">
    <div class="container">
        <div id="dersKullaniciListele">
            <table>
                <thead class="thead-dark">
                <tr>
                    <th>Ders ID</th>
                    <th>Ders Adı</th>
                    <th>Kullanıcı ID</th>
                    <th>Kullanıcı Adı Soyadı</th>
                    <th>Kullanıcı Rol</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="dersKullanici in dersKullaniciList" :key="dersKullanici.id">
                    <td>{{dersKullanici.dersId}}</td>
                    <td>{{dersKullanici.dersAdi}}</td>
                    <td>{{dersKullanici.kullaniciId}}</td>
                    <td>{{dersKullanici.kullaniciAdSoyad}}</td>
                    <td>{{dersKullanici.kullaniciRol}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>


</body>
<!-- Jquery JS-->
<script src="vendor/jquery/jquery.min.js"></script>
<!-- Vendor JS-->
<script src="vendor/select2/select2.min.js"></script>
<script src="vendor/datepicker/moment.min.js"></script>
<script src="vendor/datepicker/daterangepicker.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!-- Main JS-->
<script src="js/global.js"></script>
<script>
    openPl();
    let navbar = document
        .getElementById("cssmenu")
        .querySelectorAll('li');
    navbar[0].className += " active";

    for (var i = 0; i < navbar.length; i++) {
        navbar[i].addEventListener("click", function() {
            var current = document.getElementsByClassName("active");
            if (current.length > 0) {
                current[0].className = current[0].className.replace(" active", "");
            }
            this.className += " active";
        });
    }
    function openPl(){
        open("pl");
    }
    function openKl(){
        open("kl");
    }
    function openMl(){
        open("ml");
    }

    function openSl(){
        open("sl");
    }
    function open(param) {
        var pl = document.getElementById("pl");
        var kl = document.getElementById("kl");
        var ml = document.getElementById("ml");
        var sl = document.getElementById("sl");
        if(param=="pl"){
            pl.style.display = "block";
            kl.style.display = "none";
            ml.style.display = "none";
            sl.style.display = "none";
        }
        else if(param=="kl"){
            kl.style.display = "block";
            pl.style.display = "none";
            ml.style.display = "none";
            sl.style.display = "none";
        }
        else if(param=="ml"){
            ml.style.display = "block";
            kl.style.display = "none";
            pl.style.display = "none";
            sl.style.display = "none";
        }
        else{
            sl.style.display = "block";
            kl.style.display = "none";
            pl.style.display = "none";
            ml.style.display = "none";
        }

    }

    function showPass() {
        var x = document.getElementById("passId");
        if (x.type === "password") {
            x.type = "text";
        } else {
            x.type = "password";
        }
    }

    new Vue({
        el: "#ogrenciKayitForm",
        mounted: function() {
        },
        methods: {
            save: function () {
                if(document.getElementById("first_name").value==null || document.getElementById("last_name").value==null ||
                    document.getElementById("tckn").value==null  || document.getElementById("kullanici_adi").value==null ||
                    document.getElementById("passId").value==null || document.getElementById("rol").value==null){
                    alert("Herhangi bir alan Boş olamaz!!!");
                }
                else{
                var ad = document.getElementById("first_name").value;
                var soyad = document.getElementById("last_name").value;
                var tckn = document.getElementById("tckn").value;
                var kullaniciAdi = document.getElementById("kullanici_adi").value;
                var sifre = document.getElementById("passId").value;
                var rol = document.getElementById("rol").value;
                    axios
                        .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/kullaniciKayit', {
                            adSoyad: ad + " " + soyad,
                            tcNo: tckn,
                            kullaniciAdi: kullaniciAdi,
                            sifre: sifre,
                            durum: "aktif",
                            rolId: Number(rol)
                        })
                        .then(response => {
                            alert("Kullanıcı Başarıyla Kydedilmiştir.");
                        })
                        .catch(function (error) {
                            console.log("hata alindi");
                        })
                }
            }
        }
    })

    new Vue({
        el: "#kullaniciListele",
        data() {
            return {
                kullaniciList: []
            }
        },
        mounted: function () {
            axios
                .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/kullaniciListeleHepsi')
                .then(response => {
                    this.kullaniciList = response.data.kullaniciList;
                })
                .catch(function (error) {
                    console.log("hata alindi");
                })
        },
        methods: {
            getRolName: function (rolId) {
                if(rolId==1)return "Öğrenci";
                else if(rolId==2)return "Öğretmen";
                else
                    return "Admin";
            },
            kullaniciSil: function (kullaniciId) {
                axios
                    .post('http://localhost:8081/projeyonetim/kullaniciSil?kullaniciId='+kullaniciId)
                    .then(response => {
                        console.log("Silme İşlemi Başarılı");
                    })
                    .catch(function (error) {
                        console.log(error);
                    })
            }

        }
    })


    new Vue({
        el: "#dersKullaniciListele",
        data() {
            return {
                dersKullaniciList: []
            }
        },
        mounted: function () {
            axios
                .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/kullaniciDersListele')
                .then(response => {
                    this.dersKullaniciList = response.data.kullaniciDersList;
                })
                .catch(function (error) {
                    console.log("hata alindi");
                })
        },
        methods: {
            getRolName: function (rolId) {
                if(rolId==1)return "Öğrenci";
                else if(rolId==2)return "Öğretmen";
                else
                    return "Admin";
            }
        }
    })



    new Vue({
        el: "#ogrenciKayitPanel",
        data() {
            return {
                user1:'',
                userList1:[],
                derslist1:'',
                dersList1:[]
            }
        },
        mounted: function() {
            axios
                .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/kullaniciListeleByRol?rolId=1')
                .then(response => {
                    this.userList1 = response.data.kullaniciList
                })
                .catch(function (error) {
                    console.log(error);
                })
            axios
                .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/dersListele')
                .then(response => {
                    this.dersList1 = response.data.dersList
                })
                .catch(function (error) {
                    console.log(error);
                })
        },
        methods: {
            saveOgrenci: function () {
                var ders1 = document.getElementById("dersListId1").value;
                var ogrenciId = document.getElementById("ogrenciId").value;
                ogrenciId= ogrenciId.split("-")[0];
                ders1= ders1.split("-")[0];
                axios
                    .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/kullaniciDersKayit', {
                        kullaniciId: ogrenciId,
                        dersId: ders1
                    })
                    .then(response => {
                        alert("İşlem Başarıyla Kaydedilmiştir.");
                    })
                    .catch(function (error) {
                        console.log("hata alindi");
                    })
            }
        }
    })

    new Vue({
        el: "#ogretmenKayitPanel",
        data() {
            return {
                user2:'',
                userList2:[],
                derslist2:'',
                dersList2:[]
            }
        },
        mounted: function() {
            axios
                .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/kullaniciListeleByRol?rolId=2') // gelenMesaj
                .then(response => {
                    this.userList2 = response.data.kullaniciList
                })
                .catch(function (error) {
                    console.log(error);
                })
            axios
                .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/dersListele')
                .then(response => {
                    this.dersList2 = response.data.dersList
                })
                .catch(function (error) {
                    console.log(error);
                })
        },
        methods: {
            saveOgretmen: function () {
                var ders2 = document.getElementById("dersListId2").value;
                var ogretmenId = document.getElementById("ogretmenId").value;
                ogretmenId= ogretmenId.split("-")[0];
                ders2= ders2.split("-")[0];
                axios
                    .post('http://ec2-35-156-64-230.eu-central-1.compute.amazonaws.com:8081/projeyonetim/kullaniciDersKayit', {
                        kullaniciId: ogretmenId,
                        dersId: ders2
                    })
                    .then(response => {
                        alert("İşlem Başarıyla Kaydedilmiştir.");
                    })
                    .catch(function (error) {
                        console.log("hata alindi");
                    })
            }
        }
    })



</script>
</html>
<!-- end document-->